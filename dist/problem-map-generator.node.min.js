!function(t,n){for(var e in n)t[e]=n[e]}(exports,function(t){function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var e={};return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=2)}([function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}();n.MapNode=function(){function t(n){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t);var e=n.id,i=n.point,o=n.position,r=n.label;this.id=e,this.point=i,this.position=o,this.label=r,this.childs=[]}return i(t,[{key:"addChildNode",value:function(t){t.id!==this.id&&-1===this.childs.indexOf(t)&&this.childs.push(t)}},{key:"addChildNodes",value:function(t){var n=this;t.forEach(function(t){return n.addChildNode(t)})}},{key:"removeChildNode",value:function(t){this.childs.indexOf(t)>-1&&this.childs.splice(this.childs.indexOf(t),1)}},{key:"removeChildNodes",value:function(t){var n=this;t.forEach(function(t){return n.removeChildNode(t)})}}]),t}()},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}();n.Point=function(){function t(n,e){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=n,this.y=e}return i(t,[{key:"distance",value:function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}}]),t}()},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e(3);Object.defineProperty(n,"Map",{enumerable:!0,get:function(){return i.Map}});var o=e(0);Object.defineProperty(n,"MapNode",{enumerable:!0,get:function(){return o.MapNode}});var r=e(1);Object.defineProperty(n,"Point",{enumerable:!0,get:function(){return r.Point}});var u=e(4);Object.defineProperty(n,"Random",{enumerable:!0,get:function(){return u.Random}})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Map=void 0;var i=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}(),o=e(0),r=e(1);n.Map=function(){function t(n){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.cols=n.cols||10,this.rows=n.rows||10,this.width=n.width||100,this.height=n.height||100,this.nodes=[],this.random=null}return i(t,[{key:"getNodes",value:function(){return 0===this.nodes.length&&this.buildMap(),this.nodes}},{key:"injectRandom",value:function(t){this.random=t}},{key:"buildMap",value:function(){this.calculateGutter(),this.addNodes(),this.addConnections(),this.randomizeNodes()}},{key:"calculateGutter",value:function(){this.gutter={x:this.width/this.cols,y:this.height/this.rows}}},{key:"addNodes",value:function(){for(var t=0;t<this.rows;t++)for(var n=0;n<this.cols;n++){var e=n*this.gutter.x+this.gutter.x/2,i=t*this.gutter.y+this.gutter.y/2;this.nodes.push(new o.MapNode({id:t+"-"+n,point:new r.Point(t,n),position:new r.Point(e,i)}))}}},{key:"addConnections",value:function(){var t=this;this.nodes.forEach(function(n){t.addConnectionsToNode(n)})}},{key:"addConnectionsToNode",value:function(t){var n=this;[new r.Point(t.point.x,t.point.y+1),new r.Point(t.point.x+1,t.point.y+1),new r.Point(t.point.x+1,t.point.y),new r.Point(t.point.x,t.point.y-1),new r.Point(t.point.x-1,t.point.y),new r.Point(t.point.x-1,t.point.y-1)].forEach(function(e){n.findNodeByPoint(e)&&t.addChildNode(n.findNodeByPoint(e))})}},{key:"randomizeNodes",value:function(){var t=this;this.nodes.forEach(function(n){n.position=t.randomizePosition(n.position),t.randomizeChildNodes(n)})}},{key:"randomizePosition",value:function(t){var n={x:this.random.getBetweenMinMax(t.x-this.gutter.x/2,t.x+this.gutter.x/2),y:this.random.getBetweenMinMax(t.y-this.gutter.y/2,t.y+this.gutter.y/2)};return new r.Point(Math.min(this.width-this.gutter.x/2,Math.max(this.gutter.x/2,n.x)),Math.min(this.height-this.gutter.y/2,Math.max(this.gutter.y/2,n.y)))}},{key:"randomizeChildNodes",value:function(t){var n=this;t.childs.filter(function(){return 1===n.random.getBetweenMinMax(0,5)}).forEach(function(n){t.removeChildNode(n),n.removeChildNode(t)})}},{key:"findNodeByPosition",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return this.nodes.find(function(e){return Math.abs(t.x-e.position.x)+Math.abs(t.y-e.position.y)<=n})}},{key:"findNodeByPoint",value:function(t){return this.nodes.find(function(n){return n.point.x===t.x&&n.point.y===t.y})}}]),t}()},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}();n.Random=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,null,[{key:"getBetweenMinMax",value:function(t,n){var e=Math.ceil(t),i=Math.floor(n);return Math.floor(Math.random()*(i-e))+e}}]),t}()}]));