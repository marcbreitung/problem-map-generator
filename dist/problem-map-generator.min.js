var ProblemMapGenerator=function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.MapNode=function(){function t(e,n,o){i(this,t),this.id=e,this.point=n,this.position=o,this.childs=[]}return o(t,[{key:"addChildNode",value:function(t){t.id!==this.id&&-1===this.childs.indexOf(t)&&this.childs.push(t)}},{key:"addChildNodes",value:function(t){var e=this;t.forEach(function(t){return e.addChildNode(t)})}},{key:"removeChildNode",value:function(t){this.childs.indexOf(t)>-1&&this.childs.splice(this.childs.indexOf(t),1)}},{key:"removeChildNodes",value:function(t){var e=this;t.forEach(function(t){return e.removeChildNode(t)})}}]),t}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});e.Point=function t(e,n){i(this,t),this.x=e,this.y=n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(3);Object.defineProperty(e,"Map",{enumerable:!0,get:function(){return i.Map}});var o=n(0);Object.defineProperty(e,"MapNode",{enumerable:!0,get:function(){return o.MapNode}});var r=n(1);Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return r.Point}});var a=n(4);Object.defineProperty(e,"Random",{enumerable:!0,get:function(){return a.Random}})},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Map=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),a=n(1);e.Map=function(){function t(e){i(this,t);var n=e.cols,o=e.rows,r=e.width,a=e.height;this.cols=n,this.rows=o,this.width=r,this.height=a,this.nodes=[],this.random=null}return o(t,[{key:"getNodes",value:function(){return 0===this.nodes.length&&this.buildMap(),this.nodes}},{key:"injectRandom",value:function(t){this.random=t}},{key:"buildMap",value:function(){this.calculateGutter(),this.addNodes(),this.addConnections(),this.randomizeNodes()}},{key:"calculateGutter",value:function(){this.gutter={x:this.width/this.cols,y:this.height/this.rows}}},{key:"addNodes",value:function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.cols;e++){var n=t*this.gutter.x+this.gutter.x/2,i=e*this.gutter.y+this.gutter.y/2;this.nodes.push(new r.MapNode(t+" - "+e,new a.Point(t,e),new a.Point(n,i)))}}},{key:"addConnections",value:function(){var t=this;this.nodes.forEach(function(e){t.addConnectionsToNode(e)})}},{key:"addConnectionsToNode",value:function(t){var e=this;[new a.Point(t.point.x,t.point.y+1),new a.Point(t.point.x+1,t.point.y+1),new a.Point(t.point.x+1,t.point.y),new a.Point(t.point.x,t.point.y-1),new a.Point(t.point.x-1,t.point.y),new a.Point(t.point.x-1,t.point.y-1)].forEach(function(n){e.findNodeByPoint(n)&&t.addChildNode(e.findNodeByPoint(n))})}},{key:"randomizeNodes",value:function(){var t=this;this.nodes.forEach(function(e){e.position=t.randomizePosition(e.position),t.randomizeChildNodes(e)})}},{key:"randomizePosition",value:function(t){var e={x:this.random.getBetweenMinMax(t.x-this.gutter.x/2,t.x+this.gutter.x/2),y:this.random.getBetweenMinMax(t.y-this.gutter.y/2,t.y+this.gutter.y/2)};return new a.Point(Math.min(this.width-this.gutter.x/2,Math.max(this.gutter.x/2,e.x)),Math.min(this.height-this.gutter.y/2,Math.max(this.gutter.y/2,e.y)))}},{key:"randomizeChildNodes",value:function(t){var e=this;t.childs.filter(function(){return 1===e.random.getBetweenMinMax(0,5)}).forEach(function(e){t.removeChildNode(e),e.removeChildNode(t)})}},{key:"findNodeByPosition",value:function(t){return this.nodes.find(function(e){return Math.abs(t.x-e.position.x)+Math.abs(t.y-e.position.y)<=4})}},{key:"findNodeByPoint",value:function(t){return this.nodes.find(function(e){return e.point.x===t.x&&e.point.y===t.y})}}]),t}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.Random=function(){function t(){i(this,t)}return o(t,null,[{key:"getBetweenMinMax",value:function(t,e){var n=Math.ceil(t),i=Math.floor(e);return Math.floor(Math.random()*(i-n))+n}}]),t}()}]);